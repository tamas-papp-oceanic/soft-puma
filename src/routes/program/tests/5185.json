{
  "steps": {
    "1": {
      "blurb": "1. Connect the device to the NMEA network and power before continuing.",
      "buttons": [ "Next", "Cancel" ],
      "scripts": {
        "1": {
          "action": "start"
        }
      }
    },
    "2": {
      "blurb": "2. Waiting for P7 to load.",
      "variables": {
        "detected": false
      },
      "buttons": [ "Next", "Fail" ],
      "scripts": {
        "1": {
          "action": "scan-device"
        },
        "2": {
          "action": "wait-device",
          "product-code": 5185,
          "timeout": 3000,
          "onSuccess": { "action": "set-var", "variable": "detected", "value": true }
        }
      }
    },
    "3": {
      "blurb": "3. Scan S/N label and type in the box below.",
      "variables": {
        "serial": ""
      },
      "inputs" : [{
        "type": "TextInput",
        "id": "serial",
        "label": "Serial number",
        "placeholder": "Enter serial number...",
        "error": {
          "title": "Error",
          "subtitle": "Serial number should be at least 6 characters long.",
          "active": false
        }
        }],
      "image": "/images/ean.gif",
      "buttons": [ "Next", "Cancel" ],
      "scripts": {
        "1": {
          "action": "start-form"
        }
      }
    },
    "4": {
      "blurb": "4. Touch screen test. Press all of the crosses on the screen.",
      "variables": {
        "touchOk": false,
        "touchResult": null
      },
      "buttons": [ "Next", "Fail" ],
      "scripts": {
        "1": {
          "action": "start-tests"
        },
        "2": {
          "action": "start-test",
          "testCode": 1
        },
        "3": {
          "action": "wait-test",
          "onSuccess": [
            { "action": "set-var", "variable": "touchOk", "value": true },
            { "action": "set-var", "variable": "touchResult", "value": null }
          ]
        }
      }
    },
    "5": {
      "blurb": "5. Brightness test. Check full range of brightness.",
      "variables": {
        "brightOk": false,
        "brightResult": null
      },
      "buttons": [ "Next", "Fail" ],
      "scripts": {
        "1": {
          "action": "start-test",
          "testCode": 2
        },
        "2": {
          "action": "wait-test",
          "onSuccess": [
            { "action": "set-var", "variable": "brightOk", "value": true },
            { "action": "set-var", "variable": "brightResult", "value": null }
          ]
        }
      }
    },
    "6": {
      "blurb": "6. GPS test. Attach GPS antenna.",
      "timeout": 180000,
      "variables": {
        "gpsOk": false,
        "gpsResult": null
      },
      "buttons": [ "Next", "Fail" ],
      "scripts": {
        "1": {
          "action": "start-test",
          "testCode": 3
        },
        "2": {
          "action": "wait-test",
          "onSuccess": [
            { "action": "set-var", "variable": "gpsOk", "value": true },
            { "action": "set-var", "variable": "gpsResult", "value": null }
          ]
        },
        "3": {
          "action": "stop-tests"
        }
      }
    },
    "7": {
      "blurb": "7. Insert update USB.",
      "variables": {
        "updated": false
      },
      "buttons": [ "Next", "Fail" ],
      "scripts": {
        "1": {
          "action": "start-update"
        },
        "2": {
          "action": "wait-update",
          "onSuccess": { "action": "set-var", "variable": "updated", "value": true }
        }
      }
    },
    "8": {
      "blurb": "TESTING DONE",
      "buttons": [ "Ok" ],
      "scripts": {
        "1": {
          "action": "log-result"
        }
      }
    }
  }
}
